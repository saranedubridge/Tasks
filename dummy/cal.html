<!DOCTYPE html>
<html>
<head>
  <title>Calculator</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="./style.css">
  <style>
    /* Custom styles for the calculator */
    body {
      padding: 5%;
      background-color: #CDDCDC;
    }

    .container {
      max-width: 400px;
      margin: 0 auto;
      background-image: linear-gradient(to top, #bdc2e8 0%, #bdc2e8 1%, #e6dee9 100%);
      border-radius: 5%;
    }

    h1 {
      text-align: center;
    }

    #result {
      height: 50px;
      width: fit-content;
      font-size: 24px;
      text-align: right;
      margin-bottom: 20px;
    }

    .number,
    .operator,
    #clear,
    #calculate,
    #back {
      width: 75px;
      height: 75px;
      font-size: 24px;
      margin: 5px;
      border-radius: 50%;
    }

    #back {
      font-size: 30px;
      justify-content: center;
      align-items: center;
    }

    .zero {
      width: 20%;
      border-radius: 40%;
    }

    #result {
      width: 100%;
      height: 70px;
      padding: 20px;
      font-size: auto;
    }

    .placeholder {
      padding: 20px;
    }

    .button {
      background-color: green;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>CASIO</h1>
    <input type="text" id="result" readonly placeholder="0">
    <div class="center" id="buttons"></div>
  </div>

  <script>
    // Get the result input field
    const resultField = document.getElementById('result');

    // Create number buttons
    for (let i = 0; i <= 9; i++) {
      createButton('number', i);
    }

    // Create operator buttons
    createButton('operator', '%');
    createButton('operator', '/');
    createButton('operator', '*');
    createButton('operator', '-');
    createButton('operator', '+');

    // Create clear button
    createButton('btn-danger', 'clear', 'C');

    // Create back button
    createButton('btn-secondary', 'back', '&larr;');

    // Create calculate button
    createButton('btn-success', 'calculate', '=');

    // Event listener for number buttons
    const numberButtons = document.querySelectorAll('.number');
    numberButtons.forEach(button => {
      button.addEventListener('click', () => {
        const value = button.dataset.value;
        expression += value;
        resultField.value = expression;
      });
    });

    // Event listener for operator buttons
    const operatorButtons = document.querySelectorAll('.operator');
    operatorButtons.forEach(button => {
      button.addEventListener('click', () => {
        const value = button.dataset.value;
        expression += value;
        resultField.value = expression;
      });
    });

    // Event listener for clear button
    const clearButton = document.getElementById('clear');
    clearButton.addEventListener('click', () => {
      expression = '';
      resultField.value = '';
    });

    // Event listener for calculate button
    const calculateButton = document.getElementById('calculate');
    calculateButton.addEventListener('click', () => {
      try {
        const result = eval(expression);
        resultField.value = result;
        expression = '';
      } catch (error) {
        resultField.value = 'Error';
      }
    });

    // Event listener for back button
    const backButton = document.getElementById('back');
    backButton.addEventListener('click', () => {
      expression = expression.slice(0, -1);
      resultField.value = expression;
    });

    // Function to create buttons
    function createButton(className, dataValue, text) {
      const button = document.createElement('button');
      button.className = 'btn button ' + className;
      button.dataset.value = dataValue;
      button.textContent = text || dataValue;
      document.getElementById('buttons').appendChild(button);
    }

    // Store the current expression
    let expression = '';

    // Event listener for keyboard input
    document.addEventListener('keydown', event => {
      const key = event.key;
      const allowedKeys = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '-', '*', '/', '%', 'Enter'];

      if (allowedKeys.includes(key)) {
        event.preventDefault();

        if (key === 'Enter') {
          calculateButton.click();
        } else {
          expression += key;
          resultField.value = expression;
        }
      } else {
        alert('Only numbers are allowed');
      }
    });
  </script>
</body>
</html>
